
============
HW interface
============

Sync signal generation

.. wavedrom:: ./wavedrom/sync_gen_pos.json
        :caption: Sync signal pos flow


\

.. wavedrom:: ./wavedrom/sync_gen_neg.json
        :caption: Sync signal neg flow

\

Truth table for old implementation

\

+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| A | B | K | Damp | Fault || K_Hi | R_Hi | L_Lo | L_Hi | R_Lo | DampOut | A&B |
+===+===+===+======+=======++======+======+======+======+======+=========+=====+
| 0 | 0 | 0 |  0   |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  1  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 0 | 0 | 0 |  0   |   1   ||  1   |  0   |  0   |  0   |  0   |    0    |  1  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 0 | 0 | 0 |  1   |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  1  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 0 | 0 | 0 |  1   |   1   ||  1   |  0   |  0   |  0   |  0   |    0    |  1  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 0 | 0 | 1 |  0   |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  1  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 0 | 0 | 1 |  0   |   1   ||  0   |  0   |  0   |  0   |  0   |    0    |  1  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 0 | 0 | 1 |  1   |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  1  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 0 | 0 | 1 |  1   |   1   ||  0   |  0   |  0   |  0   |  0   |    0    |  1  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 0 | 1 | 0 |  0   |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 0 | 1 | 0 |  0   |   1   ||  1   |  1   |  1   |  0   |  0   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 0 | 1 | 0 |  1   |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 0 | 1 | 0 |  1   |   1   ||  1   |  1   |  1   |  0   |  0   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 0 | 1 | 1 |  0   |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 0 | 1 | 1 |  0   |   1   ||  0   |  1   |  1   |  0   |  0   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 0 | 1 | 1 |  1   |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 0 | 1 | 1 |  1   |   1   ||  0   |  1   |  1   |  0   |  0   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 0 | 0 |  0   |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 0 | 0 |  0   |   1   ||  1   |  0   |  0   |  1   |  1   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 0 | 0 |  1   |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 0 | 0 |  1   |   1   ||  1   |  0   |  0   |  1   |  1   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 0 | 1 |  0   |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 0 | 1 |  0   |   1   ||  0   |  0   |  0   |  1   |  1   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 0 | 1 |  1   |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 0 | 1 |  1   |   1   ||  0   |  0   |  0   |  1   |  1   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 1 | 0 |  0   |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 1 | 0 |  0   |   1   ||  0   |  0   |  0   |  0   |  0   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 1 | 0 |  1   |   0   ||  0   |  0   |  1   |  0   |  1   |    1    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 1 | 0 |  1   |   1   ||  0   |  0   |  0   |  0   |  0   |    1    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 1 | 1 |  0   |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 1 | 1 |  0   |   1   ||  0   |  0   |  0   |  0   |  0   |    0    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 1 | 1 |  1   |   0   ||  0   |  0   |  1   |  0   |  1   |    1    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+
| 1 | 1 | 1 |  1   |   1   ||  0   |  0   |  0   |  0   |  0   |    1    |  0  |
+---+---+---+------+-------++------+------+------+------+------+---------+-----+

\

Reduced truth table for sync based transfer function

+---+---+---+-------++------+------+------+------+------+---------+-----+
| A | B | K | Fault || K_Hi | R_Hi | L_Lo | L_Hi | R_Lo | DampOut | A&B |
+===+===+===+=======++======+======+======+======+======+=========+=====+
| 0 | 0 | 0 |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  1  |
+---+---+---+-------++------+------+------+------+------+---------+-----+
| 0 | 0 | 0 |   1   ||  1   |  0   |  0   |  0   |  0   |    0    |  1  |
+---+---+---+-------++------+------+------+------+------+---------+-----+
| 0 | 0 | 1 |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  1  |
+---+---+---+-------++------+------+------+------+------+---------+-----+
| 0 | 0 | 1 |   1   ||  0   |  0   |  0   |  0   |  0   |    0    |  1  |
+---+---+---+-------++------+------+------+------+------+---------+-----+
| 0 | 1 | 0 |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  0  |
+---+---+---+-------++------+------+------+------+------+---------+-----+
| 0 | 1 | 0 |   1   ||  1   |  1   |  1   |  0   |  0   |    0    |  0  |
+---+---+---+-------++------+------+------+------+------+---------+-----+
| 0 | 1 | 1 |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  0  |
+---+---+---+-------++------+------+------+------+------+---------+-----+
| 0 | 1 | 1 |   1   ||  0   |  1   |  1   |  0   |  0   |    0    |  0  |
+---+---+---+-------++------+------+------+------+------+---------+-----+
| 1 | 0 | 0 |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  0  |
+---+---+---+-------++------+------+------+------+------+---------+-----+
| 1 | 0 | 0 |   1   ||  1   |  0   |  0   |  1   |  1   |    0    |  0  |
+---+---+---+-------++------+------+------+------+------+---------+-----+
| 1 | 0 | 1 |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  0  |
+---+---+---+-------++------+------+------+------+------+---------+-----+
| 1 | 0 | 1 |   1   ||  0   |  0   |  0   |  1   |  1   |    0    |  0  |
+---+---+---+-------++------+------+------+------+------+---------+-----+
| 1 | 1 | 0 |   0   ||  0   |  0   |  1   |  0   |  1   |    1    |  0  |
+---+---+---+-------++------+------+------+------+------+---------+-----+
| 1 | 1 | 0 |   1   ||  0   |  0   |  0   |  0   |  0   |    1    |  0  |
+---+---+---+-------++------+------+------+------+------+---------+-----+
| 1 | 1 | 1 |   0   ||  0   |  0   |  1   |  0   |  1   |    0    |  0  |
+---+---+---+-------++------+------+------+------+------+---------+-----+
| 1 | 1 | 1 |   1   ||  0   |  0   |  0   |  0   |  0   |    0    |  0  |
+---+---+---+-------++------+------+------+------+------+---------+-----+



+--------++----------------+
| Pin    || Definition     |
+========++================+
| J11-17 || Sync A         |
+--------++----------------+





+--------+----------------+
| Pin    | Definition     |
+========+================+
| J11-17 | Sync A         |
+--------+----------------+
| J11-18 | Sync B         |
+--------+----------------+
| J11-19 | Sync K         |
+--------+----------------+
| J11-20 | Dynamic damper |
+--------+----------------+



IO interface

+--------+----------------+-----+------------+
| Pin    | Definition     | I/O | Mode       |
+========+================+=====+============+
| J11-14 | Direction      | TBD | TBD        |
+--------+----------------+-----+------------+
| J11-15 | RS485+         |  O  | Open drain |
+--------+----------------+-----+------------+
| J11-16 | RS485-         |  O  | Open drain |
+--------+----------------+-----+------------+
| J11-17 | Sync A         |  O  | Open drain |
+--------+----------------+-----+------------+
| J11-18 | Sync B         |  O  | Open drain |
+--------+----------------+-----+------------+
| J11-19 | Sync K         |  O  | Open drain |
+--------+----------------+-----+------------+
| J11-20 | Mode           |  O  | Open drain |
+--------+----------------+-----+------------+
| J11-21 | CON_ExtEnable  |  O  | Dig 0/1    |
+--------+----------------+-----+------------+
| J11-22 | Fault          | I/O | Open drain |
+--------+----------------+-----+------------+



- RS485+:
- RS485+:
- Sync A: Signal for driving tranistor A-pair, open-drain
- Sync B: Signal for driving tranistor B-pair
- Sync K: Signal for driving tranistor K (kick-in)
- Mode: Unused signal 
- CON_ExtEnable: Control of DCDC supply
- Fault: Error indicator, low indicates fault signal from other peripheral 
